# 모든 것이 HTTP

### HTTP

> HyperText Transfer Protocol

이미지, 음성, 영상, 파일 거의 모든 형태의 데이터를 HTTP를 사용해서 전송을 하고 있다.

### HTTP의 역사

지금 우리한테 중요한 것은 `HTTP/1.1`.
우리가 가장 많이 사용하고, 가장 중요한 버전.
대부분의 스펙이 다 들어가있고, HTTP2, 3는 성능 개선에 초점이 맞춰져 있다.

강의에선 대부분 1.1 버전으로 설명을 한다.

### 기반 프로토콜

1.1, 2버전은 `TCP`
3버전은 `UDP`로 되어있다.

# 클라이언트 서버 구조

클라이언트가 요청을 보내고 서버가 응답을 보낸다.
클라이언트와 서버를 분리하는 것이 중요하다.
예전에는 이 두 개념이 분리되어 있지 않았다.

비지니스 로직이나, 데이터 같은 경우는 서버에 집중하고, UI와 같은 뷰 로직같은 것은 클라이언트에 집중할 수 있다. 양쪽이 독립적으로 성장할 수 있다는 것이 중요

# 무상태 프로토콜 (stateless)

> 서버가 클라이언트의 상태를 유지하지 않는다.

왜???

- 무상태는 응답 서버를 쉽게 바꿀 수 있다. - 무한한 서버 증설 가능
- 중간에 클라이언트 요청이 많이 증가해도 서버를 많이 증설할 수 있다.

서버를 증설하려고 했는데 기존의 서버에 있던 상태들이 있으면 증설하기가 되게 어렵다.

### 무상태의 한계?

- 상태를 유지해야 하는 경우? 대표적으로 로그인은 사용자가 로그인했다는 정보가 필요한데, 브라우저의 쿠키와 서버 세션등을 사용해서 유지할 수 있다 = 상태 유지는 최소한만 사용하자.
- 데이터를 너무 많이 보낸다.

# 비연결성 (connectionless)

`TCP/IP` 같은 경우에는 연결을 유지한다.
연결을 유지하면 서버의 자원이 계속해서 소모가 되는 것이다.
근데 만약 연결을 유지하지 않으면 서버는 최소한의 자원을 유지할 수 있다.

`HTTP`는 기본적으로 연결을 유지하지 않는다.
한 시간동안 수천명이 사용하고 있어도, 실제 서버에서 동시에 처리하는 요청은 수십개 이하로 매우 작다. 그래서 서버 자원을 효율적으로 사용할 수 있다.

### 비연결성의 단점?

- `TCP/IP` 연결을 새로 맺어야 함 - 3 way handshake 시간이 추가된다.
- 웹 브라우저에 사이트를 요청하면 HTML, JS, CSS를 요청한다.
- 그래서 지금은 HTTP 지속 연결로 문제 해결
- 2, 3버전에서는 훨씬 최적화 됐음

### HTTP 지속 연결

- 0.1초만에 연결하고
- 요청하고 응답을 받고 연결을 유지시킨다.
- 내부 매커니즘으로 몇 초 동안 유지를 한다.
- 쭈욱 다 받고나서 연결을 해제시킨다.
- HTTP2/HTTP3에서는 더더욱 개선됐다.
